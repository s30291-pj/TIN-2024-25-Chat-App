<html>
    <head>
        <title>TIN - Chat App</title>
        <link href="./assets/css/style.css" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=logout" />
        <script src="https://kit.fontawesome.com/a0987c2a30.js" crossorigin="anonymous"></script>
        <script src="./assets/js/script.js"></script>
        <script src="./assets/js/communication.js"></script>
        <script src="./assets/js/application.js"></script>
    </head>

    <body id="site" class="">
        <div id="content">
            <div id="sidebar">
                <div id="account">
                    <img id="account-img" class="avatar-img" src="https://api.dicebear.com/9.x/identicon/svg?seed=Unknown&size=32">
                    <h4 id="account-name" class="name">Unknown</h4>
                    <div id="account-identifier-copy" class="identifier-container">
                        <h6 id="account-identifier" class="identifier">Unknown</h6>
                        <i class="fa-solid fa-copy"></i>
                    </div>
                    <button id="logout" class="button-secondary" onclick="logout()"><i class="fa-solid fa-arrow-right-from-bracket"></i></button>
                </div>
                <div id="contacts">
                    <div id="contact-list-header">
                        <h2>Chats</h2>
                        <div id="search">
                            <i class="fa-solid fa-search"></i>
                            <input id="search-contact-input" type="text" placeholder="Search in contacts" autocomplete="off">
                            <button id="add-contact-button" class="button-secondary"><i class="fa-solid fa-user-plus"></i></button>
                        </div>
                    </div>
                    <div id="contact-list"></div>
                </div>
            </div>

            <div id="chat-window" class="">
                <div id="chat-receiver">
                    <img id="chat-receiver-img" class="avatar-img" src="https://api.dicebear.com/9.x/identicon/svg?seed=Test&size=32">
                    <h4 id="chat-receiver-name" class="name">Unknown</h4>
                    <div id="chat-receiver-identifier-copy" class="identifier-container">
                        <h6 id="chat-receiver-identifier" class="identifier">Unknown</h6>
                        <i class="fa-solid fa-copy"></i>
                    </div>
                </div>
                <div id="chat">
                    <div id="messages">
                    </div>
                </div>
                <div id="message-input-box">
                    <input id="message-input" type="text" placeholder="Type message here..." autocomplete="off">
                    <button id="message-send-button" class="button-secondary"><i class="fa-solid fa-paper-plane"></i></button>
                </div>
            </div>
        </div>

        <div id="dialogs-wrapper" class="active">
            <span class="dialog-background"></span>
    
            <div id="connect-dialog" class="dialog active">
                <h4>Connect</h4>
                <div id="connect-form">
                    <input id="connect-username" type="text" placeholder="Username" autocomplete="off" oninput="onConnectDialogInput()">
                    <input id="connect-passphrase" type="password" placeholder="Passphrase" autocomplete="off" oninput="onConnectDialogInput()">
                    <img class="avatar-img" src="https://api.dicebear.com/9.x/identicon/svg?seed=Test&size=32">
                </div>
                <input id="connect-server" type="text" placeholder="Server" value="http://sv1-tin-chat.hinsinger.me/api/" autocomplete="off">
                <small id="connect-error" class="error-text"></small>
                
                <small><b>Hey!</b> Create a strong passphrase and store it safely. Anyone who knows your username and passphrase can access your chats.</small>
    
                <div id="join-container">
                    <button id="join-button" class="button-primary" onclick="connect()">Join</button>
                    <h5 id="identifier-lable">Your identifier:</h6>
                    <div id="connect-identifier-copy" class="identifier-container">
                        <h6 id="connect-identifier" class="identifier">Unknown for now!</h6>
                        <i class="fa-solid fa-copy"></i>
                    </div>
                </div>
            </div>
    
            <div id="invite-dialog" class="dialog">
                <h4>Add Contact</h4>
                <input id="invitation-input" type="text" placeholder="User Hash">
                <small id="invitation-error" class="error-text"></small>
                <small>Provide the <b>other user's</b> hash above. To establish contact, the other user also needs to invite you using <b>your</b> hash.</small>
                <div class="buttons-row">
                    <button id="invite-button" class="button-primary">Invite</button>
                    <button id="close-dialog" class="button-secondary" onclick="closeDialog()">Cancel</button>
                </div>
            </div>
        </div>

        <div id="watermark">
            <h6>Created by Stanislas Hinsinger (s30291) for TIN 2024-25's final project. <a href="https://github.com/s30291-pj/TIN-2024-25-Chat-App">See this on Github</h6>
        </div>

        <button id="theme-button" onclick="switchTheme()">
            <i class="fa-solid fa-moon"></i>
            <i class="fa-solid fa-sun"></i>
        </button>
    </body>
</html>